# 第 2 章  列表和元组

-----

## 序列概述

- 在编写程序时，几乎在所有情况下都可使用列表来代替元组。
- 一种例外情况是将元组用作字典键。在这种情况下，不能使用列表来代替元组，因为字典键是不允许修改的。
- Python 中的容器（container），即包含对象的对象的一种数据结构，通常可以是列表、元组、字典与集合（set）等。

-----

## 通用的序列操作

- 索引（indexing）
  - 字符串就是由字符组成的序列
  - Python 没有专门用于表示字符的类型，因此一个字符就是只包含一个元素的字符串。
  - 索引适用于所有序列
  - 使用负数索引时，Python 将从右（即从最后一个元素）开始往左数，因此 -1 是最后一个元素的位置，如 `greeting[-1]` 表示最后一个元素。
  - 调用的函数返回为字符串（序列）的话，依然可对其直接使用索引。

  ```python
  >>> ret = input('Type a serial of words: ')[3]
  Type a serial of words: This is a test
  >>> ret
  's'
  # 索引 input 函数读取的用户输入
  ```

- 切片（slicing）：
  - 格式规范：`list_name[start:end:[offset]]`
  - 格式说明：
    - 提供两个索引来指定切片的边界，其中第一个索引指定的元素包含在切片内，但第二个索引指定的元素不包含在切片内（一种左闭右开区间）。
    - 步长（offset）：指从起始的索引开始每隔几个元素再取元素（见下文示例）

    ```python
    >>> numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
    >>> numbers[3:6] 
    4, 5, 6]
    >>> numbers[0:1] 
    [1]
    ```

  - 关于负数索引：

    ```python
    >>> numbers[-1:-3]
    []
    # 负数索引从小到大指定区间
    >>> numbers[-3:-1]
    [8, 9]
    # 依然遵循左闭右开区间的原则
    >>> numbers[-3:0]
    []
    # 异常结果：由于索引0不存在，因此返回空列表。
    ```

  - 绝妙的简写：

    ```python
    >>> numbers[-3:]
    [8, 9, 10]
    # 省略结束的索引，表示直到列表末尾。
    >>> numbers[:8]
    [1, 2, 3, 4, 5, 6, 7, 8]
    # 省略开始的索引，表示从列表开始到指定索引。
    >>> numbers[:] 
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    # 省略起始与结束的索引表示整体列表
    ```

  - 步长的使用：

    ```python
    >>> numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    >>> numbers[0:10:1]
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    # 指定步长为1，即返回每个元素。
    >>> numbers[::1]
    [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    # 省略起始与结束的索引，指定步长为1，即返回每个元素。
    >>> numbers[0:10:2] 
    [1, 3, 5, 7, 9]
    # 指定步长为2，即每隔一个元素再取元素。
    >>> numbers[3:6:3]
    [4]
    # 指定步长为3，即每隔两个元素再取元素。
    >>> numbers[::4]
    [1, 5, 9]
    # 指定步长为4，即每隔三个元素再取元素。

    >>> numbers[8:3:-1]
    [9, 8, 7, 6, 5]
    >>> numbers[8:3:-2]
    [9, 7, 5]
    # 步长不能为0，否则无法向前移动，但可以为负数，即从右向左提取元素。
    >>> numbers[5::-2]
    [6, 4, 2]
    ```

- 序列相加：
  - 字符串与列表都是序列的不同类型
  - 因此，两者各自可以使用 `+` 操作符进行合并。需要注意的是，只能是字符串之间合并或者列表之间合并，字符串与列表间的合并将报错！
  - 一般而言，不能拼接不同类型的序列。

  ```python
  >>> a = 'Hello' 
  >>> b = [43, 23, 32] 
  >>> a + b
  Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
  TypeError: can only concatenate str (not "list") to str
  ```

- 乘法：
  - 空列表：`[]`
  - Python 中使用 None 表示什么都没有
  - 将序列与数 x 相乘时，将重复这个序列 x 次来创建一个新序列（字符串或列表）

- 成员资格：
  - in 运算符（布尔运算符）：判断成员是否在序列中，存在即返回 True，不存在即返回 False。

  ```python
    >>> permissions = 'rw' 
      >>> 'w' in permissions 
      True
      ```

  - 序列相关内置函数：
    - len()：返回序列的长度（元素的个数）
    - max()：返回序列中最大的元素。也可直接传递多个实参，返回实参的最大值。
    - min()：返回序列中最小的元素。也可直接传递多个实参，返回实参的最小值。

    ```python
    >>> numbers = [234, 10, 789] 
    >>> len(numbers) 
    3
    >>> max(numbers) 
    789
    >>> min(numbers) 
    10

    >>> max(34, 23423, 65523) 
    65523
    >>> min(34, 23423, 65523)
    34
    ```

-----

## 列表：Python 的主力

- 函数 list：
  - 实际上 list 是一个类而不是函数。
  - 语法：`list(seq)`
  - list 函数的参数可以是字符串也可以是其他任何序列
  - 字符串转换为列表：

    ```python
    >>> s = 'Hello'
    >>> spl = list(s)
    # 转换字符串为列表
    >>> spl
    ['H', 'e', 'l', 'l', 'o']
    >>> ''.join(spl)
    'Hello'
    # 转换字符列表为字符串
    ```

- 基本的列表操作：
  - 列表可被修改，并支持所有的序列操作（索引、切片、拼接、相乘与成员判断等），并且还具有众多的方法（method）。
  - 修改列表：

  ```python
  # 给元素赋值
  >>> p = ['ro', 'rw', 'rwx', 'NaN']
  >>> p[1] = 'r'  # 利用索引赋值
  >>> p
  ['ro', 'r', 'rwx', 'NaN']

  # 删除元素
  >>> del p[-3:]  # del 语句与切片删除多个元素
  >>> p
  ['ro']

  # 给切片赋值
  >>> name = list('Perl')
  >>> name[-2:] = list('ar')  # 将转换的列表赋值给切片（列表）
  >>> name
  ['P', 'e', 'a', 'r']
  >>> name[-3:] = list('ython') 
  >>> name
  ['P', 'y', 't', 'h', 'o', 'n']

  # 指定插入点插入列表
  >>> numbers = [1, 5, 8, 0, 23, 39]
  >>> numbers[3:3] = [34, 74]  # 在索引2后与索引3前插入列表
  >>> numbers
  [1, 5, 8, 34, 74, 0, 23, 39]

  # 替换为空切片（等效于删除切片）
  >>> numbers[3:5] = []
  >>> numbers
  [1, 5, 8, 0, 23, 39]
  ```

  - 列表方法：
    - 方法是与对象（列表、数、字符串等）联系紧密的函数。
    - 调用方式：`object.method(arguments)`
    - 方法调用与函数调用很像，只是在方法名前加上了对象和句点。
    - append 方法：

      ```python
      >>> numbers
      [1, 5, 8, 0, 23, 39]
      >>> numbers.append(49) 
      >>> numbers
      [1, 5, 8, 0, 23, 39, 49]
      ```
